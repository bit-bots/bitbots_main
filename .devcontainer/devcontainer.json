{
  "name": "Bit-Bots Jazzy Dev",

  "build": { "dockerfile": "Dockerfile" },

  "containerEnv": {
    "DISPLAY": "${localEnv:DISPLAY}",
    "LIBGL_ALWAYS_SOFTWARE": "1",
    "QT_X11_NO_MITSHM": "1",
    "DOCKER": "1"
  },

  "customizations": {
    "vscode": {
      "settings": {
        "terminal.integrated.defaultProfile.linux": "zsh",
        "terminal.integrated.profiles.linux": { "zsh": { "path": "/bin/zsh" } },
        "dev.containers.copyGitConfig": false,
        "dev.containers.gitCredentialHelperConfigLocation": "none"
      },
      "extensions": [
        "charliermarsh.ruff", // Ruff linting and formatting support
        "DavidAnson.vscode-markdownlint", // Lints markdown files
        "DotJoshJohnson.xml", // XML support
        "lextudio.restructuredtext", // Rendering rst files in preview
        "Mastermori.dsd", // DSD support
        "mohsen1.prettify-json", // JSON formatting
        "MS-CEINTL.vscode-language-pack-de", // German language pack
        "Ranch-Hand-Robotics.rde-pack", // ROS2 development environment
        "ms-python.python", // Python support
        "ms-python.vscode-pylance", // Python support
        "ms-vscode.cpptools-extension-pack", // C++ support
        "ms-vscode.cpptools-themes", // C++ support
        "ms-vscode.cpptools", // C++ support
        "streetsidesoftware.code-spell-checker-german", // Spell checker
        "streetsidesoftware.code-spell-checker", // Spell checker
        "tamasfe.even-better-toml", // TOML support
        "trond-snekvik.simple-rst" // Syntax highlighting for rst files
      ]
    }
  },

  "workspaceMount": "type=bind,source=${localWorkspaceFolder},target=/home/bitbots/bitbots_main",
  "workspaceFolder": "/home/bitbots/bitbots_main",

  "mounts": [
    "type=bind,source=${localEnv:HOME},target=/srv/host_home,consistency=cached"
  ],

  "runArgs": [
    "--tmpfs",
    "/tmp:exec,mode=01777",
    "--privileged",
    "--net=host",
    "--device=/dev/dri:/dev/dri",
    "--volume=/tmp/.X11-unix:/tmp/.X11-unix",
    "--cap-add=SYS_PTRACE",
    "--security-opt",
    "seccomp=unconfined"
  ],

  "postCreateCommand": "git config --global --add safe.directory '*'"
}
