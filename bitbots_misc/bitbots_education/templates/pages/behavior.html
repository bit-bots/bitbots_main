{% import "components/current_action.html" as current_action_components %}
{% import "components/behavior_stack.html" as behavior_stack_component %}
{% import "components/behavior_tree.html" as behavior_tree_component %}
{% import "components/behavior_tree_minimal.html" as behavior_tree_minimal %}
{% import "components/textbox.html" as components %}
{% import "components/icon_footer.html" as icon_components %}


{% extends "base.html" %}

{% block banner %}Verhalten{% endblock %}

{% block content %}
    <script type="text/javascript">
        function behavior_visualization_change() {
            return {
                stack: true,
                toggleStack() {
                    this.stack = !this.stack;
                },
            };
          }
    </script>
<div class="bg-sky-100 overflow-hidden" x-data="behavior_visualization_change()">
    <div x-on:click="toggleStack()">
        <div class="grid place-items-center mt-4">
            <div class="flex justify-around border-2 border-zinc-800 bg-zinc-100 rounded-2xl shadow-md">
                <button class="py-2 px-2 grid place-items-center text-xs" x-bind:class="stack && 'bg-sky-100 rounded-l-2xl'">Stapel</button>
                <button class="py-2 px-2 grid place-items-center text-xs" x-bind:class="stack || 'bg-sky-100 rounded-r-2xl'">Baum</button>
            </div>
        </div>
    </div>

    <div x-show="stack">
        {{ behavior_stack_component.behavior_stack_component() }}
    </div>
    <div x-show="!stack">
        {{ behavior_tree_minimal.behavior_tree_minimal_component() }}
    </div>
    <div class="flex flex-row justify-evenly">
        <div class="flex flex-row justify-center">
            <div class="flex flex-col justify-center">
                <div class="p-2 rounded-2xl border-2 border-zinc-800 bg-sky-800 w-2 h-2"></div>
            </div>
            <div class="text-base p-2 text-zinc-900">Abwägung</div>
        </div>
        <div class="flex flex-row justify-center">
            <div class="flex flex-col justify-center">
                <div class="p-2 rounded-2xl border-2 border-zinc-800 bg-zinc-100 w-2 h-2"></div>
            </div>
            <div class="text-base p-2 text-zinc-900">Aktion</div>
        </div>
    </div>
    {{ components.textbox("Warum ändern sich die Boxen und wieso haben sie unterschiedliche Farben?",
    "Jede Box steht für eine Entscheidung oder eine Aktion, die der Roboter macht. Dabei macht er meist viele unterschiedliche Abwägungen (blaue Boxen),
    bis er sich am Ende für eine Aktion entscheidet, die er dann ausführt (helle Box). Zusätzlich steht auch unter jeder Entscheidung neben dem Pfeil nach unten,
    wofür der Roboter sich entschieden hat. Da der Roboter während des Spiels in unterschiedliche Situationen kommt, ändert sich seine Entscheidungen dementsprechend. Sie könne auch
    in die Verhaltensbaum Ansicht wechseln, indem sie oben auf den Toggle Button klicken. Dort sehen sie die Entscheidungen in einer Baumstruktur, die sich aus den Abwägungen ergeben.
    Sollten Sie sich eine Reihe an Entscheidungen etwas länger angucken wollen, können sie auf den Button unter der Aktion drücken und können damit den Fluss an Entscheidungen
    anhalten und wieder starten. ", true, true) }}
    <div style="width: 100%;" class="grid place-items-center p-6">
        <img  src="{{ url_for('static', filename='bitBot_whiteboard.svg') }}" x-ref="whiteboard"></img>
    </div>
    {{ components.textbox("Vergleich zum Menschen", "Das Verhalten ist ähnlich zur Entscheidungsfindung des Menschen, wobei durch kleine Entscheidungen verschiedene Einflüsse abgewogen werden,
    bis sich der Roboter für eine endgültige Aktion entscheidet.", true, false)}}

    {{ components.textbox("Nutzen im Roboter", "Das Verhalten steuert, wo der Roboter hin läuft und was er als Nächstes tut.
    Hier sind Strategien für das Spiel gespeichert, also Spielzüge, wer wann zum Ball stürmt oder als Verteidiger zurück bleibt. Um diese Entscheidungen treffen zu können,
    bekommt das Verhalten sehr viele Informationen von anderen Softwarekomponenten, wie zum Beispiel die Position des Balls von der Bildverarbeitung.", true, false)}}

    {{ components.textbox("Wie funktioniert das Verhalten?", "Im Vergleich zur Bildverarbeitung ist das Verhalten nicht gelernt, sondern besteht aus vielen Abwägungen ähnlich zu: wenn X, dann Y.
    Wobei X und Y durch einen Informatiker im Code festgelegt worden sind. Es gibt verschiedene Strukturen in denen man diese Abwägungen ordnen kann. Darunter Endliche Automaten oder Entscheidungsbäume.
    Doch die Bit-Bots haben sich eine eigene Struktur überlegt: den Dynamic Stack Decider (kurz DSD, in Deutsch so was wie dynamischer Stapel Entscheider). Der DSD ist zunächst sehr ähnlich zu einem
    Entscheidungsbaum. Die Baumstruktur entsteht dabei durch die verschiedenen Antwortmöglichkeiten auf eine Entscheidung. Oben in der Visualisierung sehen sie nur die gewählten
    Antworten, aber sie können sich vorstellen, dass jede Entscheidung eine Astgabelung darstellt und je nach Antwort der eine oder der andere Ast ausgewählt wird. Was der DSD nun besonders macht,
    ist, dass er sich für den aktuell ausgewählten Pfad für jede Entscheidung Zusatzinformationen merkt, indem er die gemachten Entscheidungen auf einen Stapel legt. Ändert sich nun der Pfad,
    weil ein Entscheidung sich an einer Stelle aufgrund einer veränderten Spielsituation ändert, ändert sich auch der ganze Stapel da drüber und alles was sich die Software dort
    gemerkt hat, wird zurückgesetzt.", false, false)}}
</div>
{% endblock %}

{% block icons %}
    {{ icon_components.icons("behavior") }}
{% endblock %}

