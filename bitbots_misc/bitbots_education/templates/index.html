<!DOCTYPE html>
<html class="h-full">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/eventemitter2@6.4.9/lib/eventemitter2.min.js"></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/roslib@1/build/roslib.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
<script src="https://unpkg.com/htmx.org@2.0.4" integrity="sha384-HGfztofotfshcF7+8n44JQL2oJmowVChPTg48S+jvZoztPfvwD79OC/LTtG6dMp+" crossorigin="anonymous"></script>

<script type="text/javascript" >
  // Connecting to ROS
  // -----------------

  var ros = new ROSLIB.Ros({
    url : `ws://${window.location.hostname}:9090`
  });

  ros.on('connection', function() {
    console.log('Connected to websocket server.');
  });

  ros.on('error', function(error) {
    console.log('Error connecting to websocket server: ', error);
  });

  ros.on('close', function() {
    console.log('Connection to websocket server closed.');
  });

  let behavior_changes = true;
</script>

</head>
<body class="h-full bg-cover bg-sky-800">
  <script>
    document.body.addEventListener('htmx:configRequest', function(evt) {
        const url = new URL(evt.detail.path, window.location.origin);
        url.searchParams.set('_', Date.now()); // cache-busting query param
        evt.detail.path = url.pathname + url.search;
      });

      // This enables us to use the htmx with both partial and full page loads without a dynamic backend
      // It loads the page for a full page load dynamically by injecting the partial page into the index.html
      document.addEventListener("DOMContentLoaded", function () {
        // Get url parameter
        const urlParams = new URLSearchParams(window.location.search);
        const page = urlParams.get('page') || 'dashboard'; // Default to 'dashboard' if no page is specified
        htmx.ajax('GET', `pages/${page}.html`, {
          target: '#content',
          swap: 'innerHTML'
        });
      });
  </script>
  <div class="h-full flex justify-between flex-col">
    <div class="grid place-items-center p-4 bg-zinc-100 border-b-2 border-zinc-800 shadow-md">
      <h1 id="banner" class="text-2xl font-medium"></h1>
    </div>
    <div id="content" class="overflow-scroll">
    </div>
    <div class="flex justify-around bg-zinc-100 border-t-2 border-zinc-800 shadow-md">
      <a class="py-4 border-r-2 border-zinc-800 w-full h-full grid place-items-center" hx-get="pages/dashboard.html" hx-target="#content" hx-swap="innerHTML" hx-trigger="click" hx-push-url="?page=dashboard">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6">
          <path stroke-linecap="round" stroke-linejoin="round" d="m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25" />
        </svg>
      </a>
      <a class="py-4 border-r-2 border-zinc-800 w-full h-full grid place-items-center" hx-get="pages/imu.html" hx-target="#content" hx-swap="innerHTML" hx-trigger="click" hx-push-url="?page=imu">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6">
          <path stroke-linecap="round" stroke-linejoin="round" d="M12 3v17.25m0 0c-1.472 0-2.882.265-4.185.75M12 20.25c1.472 0 2.882.265 4.185.75M18.75 4.97A48.416 48.416 0 0 0 12 4.5c-2.291 0-4.545.16-6.75.47m13.5 0c1.01.143 2.01.317 3 .52m-3-.52 2.62 10.726c.122.499-.106 1.028-.589 1.202a5.988 5.988 0 0 1-2.031.352 5.988 5.988 0 0 1-2.031-.352c-.483-.174-.711-.703-.59-1.202L18.75 4.971Zm-16.5.52c.99-.203 1.99-.377 3-.52m0 0 2.62 10.726c.122.499-.106 1.028-.589 1.202a5.989 5.989 0 0 1-2.031.352 5.989 5.989 0 0 1-2.031-.352c-.483-.174-.711-.703-.59-1.202L5.25 4.971Z" />
        </svg>
      </a>
      <a class="py-4 border-r-2 border-zinc-800 w-full h-full grid place-items-center" hx-get="pages/vision.html" hx-target="#content" hx-swap="innerHTML" hx-trigger="click" hx-push-url="?page=vision">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6">
          <path stroke-linecap="round" stroke-linejoin="round" d="M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z" />
          <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z" />
        </svg>
      </a>
      <a class="py-4 border-r-2 border-zinc-800 w-full h-full grid place-items-center" hx-get="pages/motor_heat.html" hx-target="#content" hx-swap="innerHTML" hx-trigger="click" hx-push-url="?page=motor_heat">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6">
          <path stroke-linecap="round" stroke-linejoin="round" d="M15.362 5.214A8.252 8.252 0 0 1 12 21 8.25 8.25 0 0 1 6.038 7.047 8.287 8.287 0 0 0 9 9.601a8.983 8.983 0 0 1 3.361-6.867 8.21 8.21 0 0 0 3 2.48Z" />
          <path stroke-linecap="round" stroke-linejoin="round" d="M12 18a3.75 3.75 0 0 0 .495-7.468 5.99 5.99 0 0 0-1.925 3.547 5.975 5.975 0 0 1-2.133-1.001A3.75 3.75 0 0 0 12 18Z" />
        </svg>
      </a>
      <a class="py-4 w-full h-full grid place-items-center" hx-get="pages/behavior.html" hx-target="#content" hx-swap="innerHTML" hx-trigger="click" hx-push-url="?page=behavior">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6">
          <path stroke-linecap="round" stroke-linejoin="round" d="M12 18v-5.25m0 0a6.01 6.01 0 0 0 1.5-.189m-1.5.189a6.01 6.01 0 0 1-1.5-.189m3.75 7.478a12.06 12.06 0 0 1-4.5 0m3.75 2.383a14.406 14.406 0 0 1-3 0M14.25 18v-.192c0-.983.658-1.823 1.508-2.316a7.5 7.5 0 1 0-7.517 0c.85.493 1.509 1.333 1.509 2.316V18" />
        </svg>
      </a>
    </div>
  </div>
</body>
</html>
